kind: AppProject
apiVersion: argoproj.io/v1alpha1
metadata:
  name: projectA
  namespace: argo
spec:
  permitOnlyProjectScopedClusters: true
  sourceNamespaces:
    - namespace-one
  roles:
  # A role which provides read-only access to all applications in the project
  - name: read-only
    description: Read-only privileges to project A
    policies:
    - p, proj:projectA:read-only, applications, get, projectA/*, allow
    groups:
    - projectA-readonly

  - name: admin
    description: Admin privileges to projectA
    policies:
      - p, proj:projectA:read-only, applications, get, projectA/*, allow
      - p, proj:projectA:read-only, applications, get, projectA/*, allow
      - p, proj:projectA:read-only, applications, get, projectA/*, allow

      - p, proj:projectA:admin, applications, create, projectA/*, allow
      - p, proj:projectA:admin, applications, update, projectA/*, allow
      - p, proj:projectA:admin, applications, delete, projectA/*, allow
      - p, proj:projectA:admin, applications, sync, projectA/*, allow
      - p, proj:projectA:admin, applications, override, projectA/*, allow
      - p, proj:projectA:admin, applications, action/*, projectA/*, allow

      - p, proj:projectA:admin, applicationsets, get, projectA/*, allow
      - p, proj:projectA:admin, applicationsets, create, projectA/*, allow
      - p, proj:projectA:admin, applicationsets, update, projectA/*, allow
      - p, proj:projectA:admin, applicationsets, delete, projectA/*, allow
      - p, proj:projectA:admin, exec, create, projectA/*, allow
    groups:
    - projectA-admin
